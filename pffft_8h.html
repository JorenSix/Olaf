<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en-US">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.14.0"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Olaf: pffft.h File Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<script type="text/javascript" src="clipboard.js"></script>
<script type="text/javascript" src="cookie.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectalign">
   <div id="projectname">Olaf
   </div>
   <div id="projectbrief">Overly Lightweight Acoustic Fingerprinting</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.14.0 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search/",'.html');
</script>
<script type="text/javascript">
$(function() { codefold.init(); });
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
$(function() {
  initMenu('',true,false,'search.php','Search',false);
  $(function() { init_search(); });
});
</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<div id="MSearchResults">
<div class="SRPage">
<div id="SRIndex">
<div id="SRResults"></div>
<div class="SRStatus" id="Loading">Loading...</div>
<div class="SRStatus" id="Searching">Searching...</div>
<div class="SRStatus" id="NoMatches">No Matches</div>
</div>
</div>
</div>
</div>

<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a href="dir_68267d1309a1af8e8297ef4c3efbcdba.html">src</a></li>  </ul>
</div>
</div><!-- top -->
<div id="doc-content">
<div class="header">
  <div class="summary">
<a href="#typedef-members">Typedefs</a> &#124;
<a href="#enum-members">Enumerations</a> &#124;
<a href="#func-members">Functions</a>  </div>
  <div class="headertitle"><div class="title">pffft.h File Reference</div></div>
</div><!--header-->
<div class="contents">

<p>PFFFT : a Pretty Fast FFT.  
<a href="#details">More...</a></p>
<div class="textblock"><code>#include &lt;stddef.h&gt;</code><br />
</div>
<p><a href="pffft_8h_source.html">Go to the source code of this file.</a></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 id="header-typedef-members" class="groupheader"><a id="typedef-members" name="typedef-members"></a>
Typedefs</h2></td></tr>
<tr class="memitem:a6299fd05123a505cff9605b6fd4ff452" id="r_a6299fd05123a505cff9605b6fd4ff452"><td class="memItemLeft" align="right" valign="top"><a id="a6299fd05123a505cff9605b6fd4ff452" name="a6299fd05123a505cff9605b6fd4ff452"></a>
typedef struct PFFFT_Setup&#160;</td><td class="memItemRight" valign="bottom"><b>PFFFT_Setup</b></td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 id="header-enum-members" class="groupheader"><a id="enum-members" name="enum-members"></a>
Enumerations</h2></td></tr>
<tr class="memitem:a2e53fece2e9e96e8beeabe770f191f91" id="r_a2e53fece2e9e96e8beeabe770f191f91"><td class="memItemLeft" align="right" valign="top"><a id="a2e53fece2e9e96e8beeabe770f191f91" name="a2e53fece2e9e96e8beeabe770f191f91"></a>enum &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a2e53fece2e9e96e8beeabe770f191f91">pffft_direction_t</a> { <b>PFFFT_FORWARD</b>
, <b>PFFFT_BACKWARD</b>
 }</td></tr>
<tr class="memdesc:a2e53fece2e9e96e8beeabe770f191f91"><td class="mdescLeft">&#160;</td><td class="mdescRight">direction of the transform <br /></td></tr>
<tr class="memitem:af5506e26b5d8295b89aa0186261dfef1" id="r_af5506e26b5d8295b89aa0186261dfef1"><td class="memItemLeft" align="right" valign="top"><a id="af5506e26b5d8295b89aa0186261dfef1" name="af5506e26b5d8295b89aa0186261dfef1"></a>enum &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#af5506e26b5d8295b89aa0186261dfef1">pffft_transform_t</a> { <b>PFFFT_REAL</b>
, <b>PFFFT_COMPLEX</b>
 }</td></tr>
<tr class="memdesc:af5506e26b5d8295b89aa0186261dfef1"><td class="mdescLeft">&#160;</td><td class="mdescRight">type of transform <br /></td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 id="header-func-members" class="groupheader"><a id="func-members" name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:a696c00c57eea120dde84a5b7a6f7bc78" id="r_a696c00c57eea120dde84a5b7a6f7bc78"><td class="memItemLeft" align="right" valign="top"><a class="el" href="struct_p_f_f_f_t___setup.html">PFFFT_Setup</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a696c00c57eea120dde84a5b7a6f7bc78">pffft_new_setup</a> (int N, <a class="el" href="#af5506e26b5d8295b89aa0186261dfef1">pffft_transform_t</a> transform)</td></tr>
<tr class="memitem:a3322de91a2e8ff92d8c224f55ebe2956" id="r_a3322de91a2e8ff92d8c224f55ebe2956"><td class="memItemLeft" align="right" valign="top"><a id="a3322de91a2e8ff92d8c224f55ebe2956" name="a3322de91a2e8ff92d8c224f55ebe2956"></a>
void&#160;</td><td class="memItemRight" valign="bottom"><b>pffft_destroy_setup</b> (<a class="el" href="struct_p_f_f_f_t___setup.html">PFFFT_Setup</a> *)</td></tr>
<tr class="memdesc:a3322de91a2e8ff92d8c224f55ebe2956"><td class="mdescLeft">&#160;</td><td class="mdescRight">Free the resources used by the fft. <br /></td></tr>
<tr class="memitem:aa2186adf3c5714578afe741f1cdcdec0" id="r_aa2186adf3c5714578afe741f1cdcdec0"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#aa2186adf3c5714578afe741f1cdcdec0">pffft_transform</a> (<a class="el" href="struct_p_f_f_f_t___setup.html">PFFFT_Setup</a> *setup, const float *input, float *output, float *work, <a class="el" href="#a2e53fece2e9e96e8beeabe770f191f91">pffft_direction_t</a> direction)</td></tr>
<tr class="memitem:a48fb170c7f691ed17eccdcf7830d974d" id="r_a48fb170c7f691ed17eccdcf7830d974d"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a48fb170c7f691ed17eccdcf7830d974d">pffft_transform_ordered</a> (<a class="el" href="struct_p_f_f_f_t___setup.html">PFFFT_Setup</a> *setup, const float *input, float *output, float *work, <a class="el" href="#a2e53fece2e9e96e8beeabe770f191f91">pffft_direction_t</a> direction)</td></tr>
<tr class="memitem:a9f7888b1051fcc78266a161b1b13aa62" id="r_a9f7888b1051fcc78266a161b1b13aa62"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a9f7888b1051fcc78266a161b1b13aa62">pffft_zreorder</a> (<a class="el" href="struct_p_f_f_f_t___setup.html">PFFFT_Setup</a> *setup, const float *input, float *output, <a class="el" href="#a2e53fece2e9e96e8beeabe770f191f91">pffft_direction_t</a> direction)</td></tr>
<tr class="memitem:a445c5a950f2e59c60c087d9b43b16a6a" id="r_a445c5a950f2e59c60c087d9b43b16a6a"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a445c5a950f2e59c60c087d9b43b16a6a">pffft_zconvolve_accumulate</a> (<a class="el" href="struct_p_f_f_f_t___setup.html">PFFFT_Setup</a> *setup, const float *dft_a, const float *dft_b, float *dft_ab, float scaling)</td></tr>
<tr class="memitem:ac7c921ac3eca49e8824dd33726f91ec7" id="r_ac7c921ac3eca49e8824dd33726f91ec7"><td class="memItemLeft" align="right" valign="top">void *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#ac7c921ac3eca49e8824dd33726f91ec7">pffft_aligned_malloc</a> (size_t nb_bytes)</td></tr>
<tr class="memitem:a13c2a81ce97de4586d68132b85704109" id="r_a13c2a81ce97de4586d68132b85704109"><td class="memItemLeft" align="right" valign="top"><a id="a13c2a81ce97de4586d68132b85704109" name="a13c2a81ce97de4586d68132b85704109"></a>
void&#160;</td><td class="memItemRight" valign="bottom"><b>pffft_aligned_free</b> (void *)</td></tr>
<tr class="memdesc:a13c2a81ce97de4586d68132b85704109"><td class="mdescLeft">&#160;</td><td class="mdescRight">Free the aligned buffers. <br /></td></tr>
<tr class="memitem:ac0472e2ff3d963a141c0514882a2c036" id="r_ac0472e2ff3d963a141c0514882a2c036"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#ac0472e2ff3d963a141c0514882a2c036">pffft_simd_size</a> (void)</td></tr>
</table>
<a name="details" id="details"></a><h2 id="header-details" class="groupheader">Detailed Description</h2>
<div class="textblock"><p>PFFFT : a Pretty Fast FFT. </p>
<p>This is basically an adaptation of the single precision fftpack (v4) as found on netlib taking advantage of SIMD instruction found on cpus such as intel x86 (SSE1), powerpc (Altivec), and arm (NEON).</p>
<p>For architectures where no SIMD instruction is available, the code falls back to a scalar version. <br  />
 Restrictions:</p>
<ul>
<li>1D transforms only, with 32-bit single precision.</li>
<li>supports only transforms for inputs of length N of the form N=(2^a)*(3^b)*(5^c), a &gt;= 5, b &gt;=0, c &gt;= 0 (32, 48, 64, 96, 128, 144, 160, etc are all acceptable lengths). Performance is best for 128&lt;=N&lt;=8192.</li>
<li>all (float*) pointers in the functions below are expected to have an "simd-compatible" alignment, that is 16 bytes on x86 and powerpc CPUs.</li>
</ul>
<p>You can allocate such buffers with the functions pffft_aligned_malloc / pffft_aligned_free (or with stuff like posix_memalign..) </p>
</div><a name="doc-func-members" id="doc-func-members"></a><h2 id="header-doc-func-members" class="groupheader">Function Documentation</h2>
<a id="ac7c921ac3eca49e8824dd33726f91ec7" name="ac7c921ac3eca49e8824dd33726f91ec7"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ac7c921ac3eca49e8824dd33726f91ec7">&#9670;&#160;</a></span>pffft_aligned_malloc()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void * pffft_aligned_malloc </td>
          <td>(</td>
          <td class="paramtype">size_t</td>          <td class="paramname"><span class="paramname"><em>nb_bytes</em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>the float buffers must have the correct alignment (16-byte boundary on intel and powerpc). This function may be used to obtain such correctly aligned buffers. </p>

</div>
</div>
<a id="a696c00c57eea120dde84a5b7a6f7bc78" name="a696c00c57eea120dde84a5b7a6f7bc78"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a696c00c57eea120dde84a5b7a6f7bc78">&#9670;&#160;</a></span>pffft_new_setup()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="struct_p_f_f_f_t___setup.html">PFFFT_Setup</a> * pffft_new_setup </td>
          <td>(</td>
          <td class="paramtype">int</td>          <td class="paramname"><span class="paramname"><em>N</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="#af5506e26b5d8295b89aa0186261dfef1">pffft_transform_t</a></td>          <td class="paramname"><span class="paramname"><em>transform</em></span>&#160;)</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>prepare for performing transforms of size N &ndash; the returned <a class="el" href="struct_p_f_f_f_t___setup.html">PFFFT_Setup</a> structure is read-only so it can safely be shared by multiple concurrent threads. </p>

</div>
</div>
<a id="ac0472e2ff3d963a141c0514882a2c036" name="ac0472e2ff3d963a141c0514882a2c036"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ac0472e2ff3d963a141c0514882a2c036">&#9670;&#160;</a></span>pffft_simd_size()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int pffft_simd_size </td>
          <td>(</td>
          <td class="paramtype">void</td>          <td class="paramname"><span class="paramname"><em></em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>return 4 or 1 whether support SSE/Altivec instructions was enable when building pffft.c </p>

</div>
</div>
<a id="aa2186adf3c5714578afe741f1cdcdec0" name="aa2186adf3c5714578afe741f1cdcdec0"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aa2186adf3c5714578afe741f1cdcdec0">&#9670;&#160;</a></span>pffft_transform()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void pffft_transform </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="struct_p_f_f_f_t___setup.html">PFFFT_Setup</a> *</td>          <td class="paramname"><span class="paramname"><em>setup</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const float *</td>          <td class="paramname"><span class="paramname"><em>input</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">float *</td>          <td class="paramname"><span class="paramname"><em>output</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">float *</td>          <td class="paramname"><span class="paramname"><em>work</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="#a2e53fece2e9e96e8beeabe770f191f91">pffft_direction_t</a></td>          <td class="paramname"><span class="paramname"><em>direction</em></span>&#160;)</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Perform a Fourier transform , The z-domain data is stored in the most efficient order for transforming it back, or using it for convolution. If you need to have its content sorted in the "usual" way, that is as an array of interleaved complex numbers, either use pffft_transform_ordered , or call pffft_zreorder after the forward fft, and before the backward fft.</p>
<p>Transforms are not scaled: PFFFT_BACKWARD(PFFFT_FORWARD(x)) = N*x. Typically you will want to scale the backward transform by 1/N.</p>
<p>The 'work' pointer should point to an area of N (2*N for complex fft) floats, properly aligned. If 'work' is NULL, then stack will be used instead (this is probably the best strategy for small FFTs, say for N &lt; 16384).</p>
<p>input and output may alias. </p>

</div>
</div>
<a id="a48fb170c7f691ed17eccdcf7830d974d" name="a48fb170c7f691ed17eccdcf7830d974d"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a48fb170c7f691ed17eccdcf7830d974d">&#9670;&#160;</a></span>pffft_transform_ordered()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void pffft_transform_ordered </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="struct_p_f_f_f_t___setup.html">PFFFT_Setup</a> *</td>          <td class="paramname"><span class="paramname"><em>setup</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const float *</td>          <td class="paramname"><span class="paramname"><em>input</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">float *</td>          <td class="paramname"><span class="paramname"><em>output</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">float *</td>          <td class="paramname"><span class="paramname"><em>work</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="#a2e53fece2e9e96e8beeabe770f191f91">pffft_direction_t</a></td>          <td class="paramname"><span class="paramname"><em>direction</em></span>&#160;)</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Similar to pffft_transform, but makes sure that the output is ordered as expected (interleaved complex numbers). This is similar to calling pffft_transform and then pffft_zreorder.</p>
<p>input and output may alias. </p>

</div>
</div>
<a id="a445c5a950f2e59c60c087d9b43b16a6a" name="a445c5a950f2e59c60c087d9b43b16a6a"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a445c5a950f2e59c60c087d9b43b16a6a">&#9670;&#160;</a></span>pffft_zconvolve_accumulate()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void pffft_zconvolve_accumulate </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="struct_p_f_f_f_t___setup.html">PFFFT_Setup</a> *</td>          <td class="paramname"><span class="paramname"><em>setup</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const float *</td>          <td class="paramname"><span class="paramname"><em>dft_a</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const float *</td>          <td class="paramname"><span class="paramname"><em>dft_b</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">float *</td>          <td class="paramname"><span class="paramname"><em>dft_ab</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">float</td>          <td class="paramname"><span class="paramname"><em>scaling</em></span>&#160;)</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Perform a multiplication of the frequency components of dft_a and dft_b and accumulate them into dft_ab. The arrays should have been obtained with pffft_transform(.., PFFFT_FORWARD) and should <em>not</em> have been reordered with pffft_zreorder (otherwise just perform the operation yourself as the dft coefs are stored as interleaved complex numbers).</p>
<p>the operation performed is: dft_ab += (dft_a * fdt_b)*scaling</p>
<p>The dft_a, dft_b and dft_ab pointers may alias. </p>

</div>
</div>
<a id="a9f7888b1051fcc78266a161b1b13aa62" name="a9f7888b1051fcc78266a161b1b13aa62"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a9f7888b1051fcc78266a161b1b13aa62">&#9670;&#160;</a></span>pffft_zreorder()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void pffft_zreorder </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="struct_p_f_f_f_t___setup.html">PFFFT_Setup</a> *</td>          <td class="paramname"><span class="paramname"><em>setup</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const float *</td>          <td class="paramname"><span class="paramname"><em>input</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">float *</td>          <td class="paramname"><span class="paramname"><em>output</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="#a2e53fece2e9e96e8beeabe770f191f91">pffft_direction_t</a></td>          <td class="paramname"><span class="paramname"><em>direction</em></span>&#160;)</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>call pffft_zreorder(.., PFFFT_FORWARD) after pffft_transform(...,
PFFFT_FORWARD) if you want to have the frequency components in the correct "canonical" order, as interleaved complex numbers.</p>
<p>(for real transforms, both 0-frequency and half frequency components, which are real, are assembled in the first entry as F(0)+i*F(n/2+1). Note that the original fftpack did place F(n/2+1) at the end of the arrays).</p>
<p>input and output should not alias. </p>

</div>
</div>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by&#160;<a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.14.0
</small></address>
</div><!-- doc-content -->
</body>
</html>
